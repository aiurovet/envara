Metadata-Version: 2.4
Name: svg2many
Version: 0.2.7
Summary: Export a single SVG to raster images of multiple resolutions
Author-email: Alexander Iurovetski <aiurovet@gmail.com>
Maintainer-email: Alexander Iurovetski <aiurovet@gmail.com>
License-Expression: MIT
Project-URL: Homepage, https://github.com/aiurovet/svg2many
Project-URL: Repository, https://github.com/aiurovet/svg2many.git
Project-URL: Documentation, https://github.com/aiurovet/svg2many/blob/main/README.md
Project-URL: Changelog, https://github.com/aiurovet/svg2many/blob/main/CHANGELOG.md
Project-URL: Issues, https://github.com/aiurovet/svg2many/issues
Keywords: image,svg,raster,svg2many,png,webp
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE.txt
Dynamic: license-file

# svg2many (C) Alexander Iurovetski 2025

## Convert an SVG file to raster images of multiple sizes, optionally splitting into background and foreground images

This application allows to produce all raster images you need (_.png_, _.webp_, or others) from a single _.svg_ file. It is based on search-and-replace of the width, height and the presence of foreground and background in the content of the source file. The main idea is that since the _SVG_ format is text (XML), there is a rational way to find spots where the default width, height, scale, offset and visibility should be substituted with required ones.

The application does not depend on any special Python package.

Pre-requisites (external dependencies):

1. An exporter from an _.svg_ to a raster image file (_.png_, _.webp_, or others). This could be even your browser running in the headless mode, like _Chromium_-based one (Google Chrome, Microsoft Edge, Opera, Vivaldi, etc.) or _Firefox-based_ (Firefox, Tor, LibreWolf, etc.). The preferred exporter, however, is _rsvg-convert_ from the GNOME's _librsvg2_. Depending on the OS you are running, it can be installed via _apt_, _yum_, _brew_ or _chocolatey_. This exporter is faster than any headless browser or tools like _ImageMagick_ or _Inkscape_, and produces images of good quality.

2. A converter from a set of raster images to _.ico_ if you need to generate Windows native icons. Preferred converter is ImageMagick's _magick_ (see the examples). You'll use that in the _after_ attribute of configuration file.

3. There is no converter from a set of raster image files to a single _.icns_ one, as the latter is deprecated by Apple (still supported for the sake of legacy though). That's why the examples for Flutter and macOS application icons do not utilise that. You are welcome to utilise that in your configuration files if you like. Please note however, that I had issues adding a 64x64 image to _.icns_ using _png2icns_ on Linux, and decided it is not worth the effort.

### Usage

This example can be used to generate all launcher icons for a _Flutter_ project. See also: _How Do I Use It_ at the end of this document

1. Install _svg2many_ from _PyPI_

2. Create your beautiful SVG image as follows:

   ```xml
   <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100">
     <g class="background" display="" transform="scale(1, 1) translate(0, 0)">
       <!--Place your actual background drawing here-->
     </g>
     <g class="foreground" display="" transform="scale(1, 1) translate(0, 0)">
       <!--Place your actual foreground drawing here-->
     </g>
   </svg>
   ```

3. Create configuration file or take that from _examples/_ in the application bundle or from the [repo's examples](https://github.com/aiurovet/svg2many/tree/main/examples)

4. Create _.env_ file(s) or take those from _examples/_ if you need. You can skip this step and make decision later.

5. Ensure the installation directory for _svg2many_ is listed in _PATH_ (or use an explicit path inside a wrapper script).

6. Run with options in any order:

   ```
   svg2many -c (your-config-file) [-r (top-dir)] [-i (input-svg)]
   ```

All options:

- `-h, --help`

   Help screen (similar to this list)

- `-c, --config CONGIG`

   A file in JSON format that holds rules of conversion (see full description below). This setting is mandatory.

- `-e, --env ENV`

   A text file containing lines in the _name = value_ format with any number of spaces in between: _CMD\_RSVG = "rsvg-convert -o {o}"_. It allows you to define extra environment variables to use in different configuration files. You can put there comments as well (starting with #). The application will load the content from _.env_, then _any.env_, then _unix_.env on UNIX-compatible OSes (Linux, BSD, macOS, AIX), then _bsd.env_ (for FreeBSD, NetBSD, etc.), then _OS.env_ (OS is what Python's _platform.system()_ returns or _macos.env_ on macOS). On Windows, it would be _.env_, _.any.env_, _windows.env_, Then, if this option is specified, that particular file. The order is important: from generic to more and more specific ones, having the later similar value overriding the earlier one. All these files will be scanned and taken from either the directory of the specified ENV or the config file's one otherwise. You do not have to have them all: the application will pick only those that are present without any warning or error that some are missing. This approach allows you to make portable (OS-independent) conversions if you need. For instance, generating images under GitHub actions, you have a luxury of automatic choice: $HOME on UNIX-like systems, $USERPROFILE on Windows, speciific paths to exporters on macOS like _"Applications/Google Chrome.app/Contents/MacOS/Google Chrome"_, and _google-chrome_ on Linux.

- `-i, --input INPUT`

   An _.svg_ file to convert. If omitted or INPUT is a mere - (dash), the SVG content will be read from _stdin_.

- `-q, --quiet`

   Do not print any information to the console. Mutually exclusive with _-v, --verbose_.

- `-r, -root ROOT`

   Project top directory to switch to and get all non-absolute paths relative to this one. The current directory will be restored on exit. If omitted, the current directory will be used.

- `-v, --verbose`

   Detailed logging, primarily, to trace issues. Mutually exclusive with _-q, --quiet_.

The default SVG-to-raster exporter is _rsvg-convert_ (to PNG), created and maintained by the GNOME project. This is the fastest and accurate way to create raster images. If you need to export to another raster image format, there is a good chance you can do that by directing the output to _stdout_, then reading into the next exporter via _stdin_ (piping). See the _export_ attribute in the examples.

ImageMagick and Inkscape are less performant, and also earlier, were producing images of lower quality. It looks like this area was improved. However, when I tried to use ImageMagick's _convert_, it failed. After I installed Inkscape, it suddenly started working. Please verify yourself if you would like to use it. My preference, though, is _rsvg-convert_

Headless Chrome is another option: it supports more SVG features, but runs slower. More importantly, it is frequently broken (and it is now, as of December 2025, on Kubuntu 25.04), and the fix might take a while to come. To my memory, it was broken at least twice within a few years. The issues, in fact, were in Chromium, which is even worse, as it impacts a wider range of browsers.

Last but not least comes headless Firefox. As of December 2025, on Kubuntu 25.04, it seems to have an issue similar to Chromium. It is by far the slowest one, as it is not cached like the Chromium-based browsers. It will fail when another instance is open (e.g. you are viewing a website with it). Also, it will fail to export when SVG content is sent via stdin rather than a file, so you must use `{i}` in the command.

Please note that most of these exporters convert SVG to PNG only

## Testing Coverage

The scripts were tested on:

1. Linux (Kubuntu 25.04): under Bourne shell and PowerShell 7.

2. GhostBSD 25.02: under Bourne shell with BSD utilities.

3. macOS 26.2: via GitHub workflow.

4. Windows 11: under PowerShell 5.1 (the _.ps1_ variant only).

## JSON Configuration File Format

### Nodes

- `/after`, `/targets/target/after`

  Command to run upon completion of all exports like _convert_ for Windows icons. The latter overrides the former.

- `/export`, `/targets/target/export`

  Command to export an input SVG image to an output raster image file. The latter overrides the former.

- `/rootDir`

  Top directory for the input and output files.

- `/inpFile`

  Input SVG file. Optional, might be passed explicitly as an arg.

- `/bkgClass`, `/targets/target/bkgClass`

  CSS class to detect background. Default: "background". The latter overrides the former.

- `/frgClass`, `/targets/target/frgClass`

  CSS class to detect foreground. Default: "foreground". The latter overrides the former.

- `/outType`, `/targets/target/outType`

  The output file type (no leading dot): png, webp, etc. The latter overrides the former.

- `/targets`

  Array of rules for each output image file defined as follows:

- `/targets/target/legend`

  Plain text to log the progress

- `/targets/target/after`

  Overrides `/after`

- `/targets/target/export`

  Overrides `/export`, might be useful to generate _webp_ icons for _Android_ leaving the rest as _png_.

- `/targets/target/delete`

  If _"true"_, delete all files listed under this target (useful if, for instance, all images have been converted to a single _.ico_ file)

- `/targets/target/outDir`

  Output sub-directory of outRoot or an absolute path

- `/targets/target/output`

  Array of the output dimensions and filenames (under _outDir_ or a path)

- `/targets/target/output/size`

  Dimensions in pixels of the background as a single number (square) or _WxH_ (rectangle).It migt be followed by dimensions of the foreground. Use space(s) to separate foreground size from the background one.

- `/targets/target/output/file`

  Name of the output image file, may contain a sub-directory or represent a full path.

### Placeholders to use in commands

Do not wrap those in quotes unless necessary, not for being "safe" with possible spaces inside:

- `{i}`

  Input (SVG) file path as passed to the utility, if not present in the full command, the content will be fed to the respective application via pipe

- `{n}`

  Input filename without type (extension). When having multiple, without any: up to the first dot.

- `{o}`

  Current output file path.

- `{t}`

  Current output file type defined in _outType_.

- `{w}`

  Current output image width: largest of two widths.

- `{h}`

  Current output image height (largest of two heights)

### Extra Expansions

- Environment variables will be expanded. Portable way: _$ABC_, _${ABC}_. Windows-specific way: _%ABC%_.

- Arguments passed to the script will be also expanded. Portable way: _\$1_, _${2}_, Windows-specific way: _\%1_, _%2_.

## Good Luck
