{
  "help": [
    "",
    "Nodes",
    "",
    "after    - command to run upon completion of all exports (like convert to .ico)",
    "export   - command to export an input SVG image to an output raster image file",
    "rootDir  - top directory for the input and output files",
    "inpFile  - input SVG file (optional, might be passed explicitly as an arg)",
    "bkgClass - class to detect background (default: \"background\")",
    "frgClass - class to detect foreground (default: \"foreground\")",
    "outType  - the output file type (no leading dot): png, webp, etc.",
    "targets  - array of rules for each output image file defined as follows:",
    "  legend - plain text to log the progress",
    "  outDir - output sub-directory of outRoot or an absolute path",
    "  output - array of the output dimensions and filenames (under outDir or a path)",
    "  delete - if 'true', delete all files listed under this target (useful if, for",
    "           instance, all images have been converted to a single .ico file)",
    "    size - dimensions in pixels of the background as a single number (square) or",
    "           WxH (rectangle); optionally followed by dimensions of the foreground;",
    "           use space(s) to separate foreground size from the background one",
    "    file - name of the output image file, may contain a (sub-)directory",
    "",
    "Placeholders",
    "",
    "(do not wrap those in quotes unless necessary, and not for being \"safe\" with possible spaces inside)",
    "",
    "{i} - input (SVG) file path as passed to the utility, if not present in the full",
    "      command, the SVG content will be fed to the respective application via pipe",
    "{n} - input filename without type (extension), when having multiple, without any",
    "{o} - current output file path",
    "{t} - current output file type defined in outType",
    "{w} - current output image width: largest of two widths",
    "{h} - current output image height: largest of two heights",
    "",
    "Environment variables can be used in the UNIX format",
    "Arguments passed to the script will be also expanded: use numbers in curly brackets",
    ""
  ],
  "export":   "$CMD_RSVG",
  "rootDir":  "$HOME/Projects/$1",
  "inpFile":  "assets/images/app_icon.svg",
  "outType":  "png",
  "frgClass": "foreground",
  "bkgClass": "background",
  "targets": [{
    "export": "rsvg-convert | cwebp -q 80 -o {o} -quiet -- -",
    "outType": "webp",
    "legend": "Android app icons",
    "outDir": "android/app/src/main/res",
    "output": [
      {"size": "     0       48", "file": "drawable-mdpi/ic_launcher_background.{t}"},
      {"size": " 48x48        0", "file": "drawable-mdpi/ic_launcher_foreground.{t}"},
      {"size": "     0       72", "file": "drawable-hdpi/ic_launcher_background.{t}"},
      {"size": "    72      0x0", "file": "drawable-hdpi/ic_launcher_foreground.{t}"},
      {"size": "   0x0       96", "file": "drawable-xhdpi/ic_launcher_background.{t}"},
      {"size": "    96        0", "file": "drawable-xhdpi/ic_launcher_foreground.{t}"},
      {"size": "     0      144", "file": "drawable-xxhdpi/ic_launcher_background.{t}"},
      {"size": "   144        0", "file": "drawable-xxhdpi/ic_launcher_foreground.{t}"},
      {"size": "     0  192x192", "file": "drawable-xxxhdpi/ic_launcher_background.{t}"},
      {"size": "   192        0", "file": "drawable-xxxhdpi/ic_launcher_foreground.{t}"},

      {"size": "   48", "file": "mipmap-mdpi/ic_launcher.{t}"},
      {"size": "   72", "file": "mipmap-hdpi/ic_launcher.{t}"},
      {"size": "96x96", "file": "mipmap-xhdpi/ic_launcher.{t}"},
      {"size": "  144", "file": "mipmap-xxhdpi/ic_launcher.{t}"},
      {"size": "  192", "file": "mipmap-xxxhdpi/ic_launcher.{t}"}
    ]
  }, {
    "legend": "iOS/iPadOS app icons",
    "outDir": "ios/Runner/Assets.xcassets/AppIcon.appiconset",
    "output": [
      {"size": "   20", "file": "Icon-20x20@1x.{t}"},
      {"size": "   40", "file": "Icon-20x20@2x.{t}"},
      {"size": "   60", "file": "Icon-20x20@3x.{t}"},
      {"size": "29x29", "file": "Icon-20x20@1x.{t}"},
      {"size": "   58", "file": "Icon-29x29@2x.{t}"},
      {"size": "   87", "file": "Icon-29x29@3x.{t}"},
      {"size": "   80", "file": "Icon-40x40@2x.{t}"},
      {"size": "  120", "file": "Icon-60x60@2x.{t}"},
      {"size": "  180", "file": "Icon-60x60@3x.{t}"},
      {"size": "   76", "file": "Icon-76x76@1x.{t}"},
      {"size": "  152", "file": "Icon-76x76@2x.{t}"},
      {"size": "  167", "file": "Icon-83.5x83.5@2x.{t}"},
      {"size": " 1024", "file": "Icon-1024x1024@1x.{t}"}
    ]
  }, {
    "legend": "Linux app icon",
    "outDir": "assets/images",
    "output": [
      {"size": "192", "file": "{n}.{t}"}
    ]
  }, {
    "legend": "macOS app icons",
    "outDir": "macos/Runner/Assets.xcassets/AppIcon.appiconset",
    "output": [
      {"size": "  16", "file": "Icon-{w}x{h}.{t}"},
      {"size": "  32", "file": "Icon-{w}x{h}.{t}"},
      {"size": "  64", "file": "Icon-{w}x{h}.{t}"},
      {"size": " 128", "file": "Icon-{w}x{h}.{t}"},
      {"size": " 256", "file": "Icon-{w}x{h}.{t}"},
      {"size": " 512", "file": "Icon-{w}x{h}.{t}"},
      {"size": "1024", "file": "Icon-{w}x{h}.{t}"}
    ]
  }, {
    "legend": "Website icons",
    "outDir": "web/icons",
    "output": [
      {"size": "16", "file": "../favicon.{t}"},

      {"size": "  16x16", "file": "favicon-{w}x{h}.{t}"},
      {"size": "     32", "file": "favicon-{w}x{h}.{t}"},
      {"size": "192x192", "file": "{n}-{w}.{t}"},
      {"size": "    512", "file": "{n}-{w}.{t}"},

      {"size": "    192  154x154", "file": "{n}-maskable-{w}.{t}"},
      {"size": "512x512      410", "file": "{n}-maskable-{w}.{t}"}
    ]
  }, {
    "legend": "Windows app icon",
    "outDir": "windows/runner/resources",
    "after":  "magick {n}-16x16.{t} {n}-24x24.{t} {n}-32x32.{t} {n}-48x48.{t} {n}-64x64.{t} {n}-256x256.{t} {n}.ico",
    "delete": "true",
    "output": [
      {"size": " 16", "file": "{n}-{w}x{h}.{t}"},
      {"size": " 24", "file": "{n}-{w}x{h}.{t}"},
      {"size": " 32", "file": "{n}-{w}x{h}.{t}"},
      {"size": " 48", "file": "{n}-{w}x{h}.{t}"},
      {"size": " 64", "file": "{n}-{w}x{h}.{t}"},
      {"size": "256", "file": "{n}-{w}x{h}.{t}"}
    ]
  }]
}
